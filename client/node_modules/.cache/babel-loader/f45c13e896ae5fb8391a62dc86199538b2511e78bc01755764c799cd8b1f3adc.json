{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{fetchOrganizations,registerUser,loginUser}from\"./api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[organizations,setOrganizations]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{async function getOrganizations(){try{const orgs=await fetchOrganizations();setOrganizations(Array.isArray(orgs)?orgs:[]);// Ensure it's always an array\n}catch(err){console.error(\"Error fetching organizations:\",err);setError(\"Failed to load organizations.\");}finally{setLoading(false);}}getOrganizations();},[]);const handleRegister=async()=>{try{const user={name:\"John\",email:\"john@example.com\",password:\"123456\"};const result=await registerUser(user);console.log(\"User registered:\",result);}catch(err){console.error(\"Registration error:\",err);}};const handleLogin=async()=>{try{const credentials={email:\"john@example.com\",password:\"123456\"};const result=await loginUser(credentials);console.log(\"User logged in:\",result);}catch(err){console.error(\"Login error:\",err);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Organizations\"}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading organizations...\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),!loading&&!error&&organizations.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No organizations found.\"}),/*#__PURE__*/_jsx(\"ul\",{children:organizations.map(org=>/*#__PURE__*/_jsx(\"li\",{children:org.name},org._id))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegister,children:\"Register\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"Login\"})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","fetchOrganizations","registerUser","loginUser","jsx","_jsx","jsxs","_jsxs","App","organizations","setOrganizations","loading","setLoading","error","setError","getOrganizations","orgs","Array","isArray","err","console","handleRegister","user","name","email","password","result","log","handleLogin","credentials","children","style","color","length","map","org","_id","onClick"],"sources":["/workspaces/ndvn/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { fetchOrganizations, registerUser, loginUser } from \"./api\";\n\nfunction App() {\n    const [organizations, setOrganizations] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        async function getOrganizations() {\n            try {\n                const orgs = await fetchOrganizations();\n                setOrganizations(Array.isArray(orgs) ? orgs : []); // Ensure it's always an array\n            } catch (err) {\n                console.error(\"Error fetching organizations:\", err);\n                setError(\"Failed to load organizations.\");\n            } finally {\n                setLoading(false);\n            }\n        }\n        getOrganizations();\n    }, []);\n\n    const handleRegister = async () => {\n        try {\n            const user = { name: \"John\", email: \"john@example.com\", password: \"123456\" };\n            const result = await registerUser(user);\n            console.log(\"User registered:\", result);\n        } catch (err) {\n            console.error(\"Registration error:\", err);\n        }\n    };\n\n    const handleLogin = async () => {\n        try {\n            const credentials = { email: \"john@example.com\", password: \"123456\" };\n            const result = await loginUser(credentials);\n            console.log(\"User logged in:\", result);\n        } catch (err) {\n            console.error(\"Login error:\", err);\n        }\n    };\n\n    return (\n        <div>\n            <h1>Organizations</h1>\n\n            {loading && <p>Loading organizations...</p>}\n            {error && <p style={{ color: \"red\" }}>{error}</p>}\n\n            {!loading && !error && organizations.length === 0 && (\n                <p>No organizations found.</p>\n            )}\n\n            <ul>\n                {organizations.map((org) => (\n                    <li key={org._id}>{org.name}</li>\n                ))}\n            </ul>\n\n            <button onClick={handleRegister}>Register</button>\n            <button onClick={handleLogin}>Login</button>\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}